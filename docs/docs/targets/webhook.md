---
sidebar_position: 1
---

# Webhook Target

Sends HTTP POST/PUT requests to a configured URL with JSON payloads containing infrastructure changes.

## Configuration

```yaml
target:
  webhook:
    url: "https://your-api.example.com/webhooks/terraform"
    method: "POST"  # POST or PUT (default: POST)
    retry:
      max_attempts: 3        # Number of retry attempts (default: 3)
      initial_delay_ms: 1000 # Initial delay in milliseconds (default: 1000)
      max_delay_ms: 30000    # Maximum delay in milliseconds (default: 30000)
      retry_on_status:       # HTTP status codes that trigger a retry
        - 500                # (default: [500, 502, 503, 504])
        - 502
        - 503
        - 504
```

## Payload Format

When analyzing a Terraform plan, Infralog sends an HTTP request to the configured URL with a JSON payload containing the plan and timestamp:

```json
{
  "plan": {
    "resource_changes": [
      {
        "address": "aws_instance.web_server",
        "type": "aws_instance",
        "name": "web_server",
        "change": {
          "actions": ["update"],
          "before": {
            "instance_type": "t2.small"
          },
          "after": {
            "instance_type": "t2.medium"
          }
        }
      }
    ],
    "output_changes": {
      "instance_ip": {
        "change": {
          "actions": ["update"],
          "before": "10.0.1.20",
          "after": "10.0.1.28"
        }
      }
    }
  },
  "datetime": "2025-11-27T10:30:00Z"
}
```

The `plan` field contains the filtered Terraform plan structure as generated by `terraform show -json`. This follows the [Terraform JSON Output Format](https://developer.hashicorp.com/terraform/internals/json-format) specification.