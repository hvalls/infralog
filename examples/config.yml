# Infralog Configuration Example
# Infralog analyzes Terraform plan files and notifies configured targets about changes

# Notification targets (configure one or more)
target:
  # Webhook target - sends JSON payload to an HTTP endpoint
  webhook:
    url: "https://your-api.example.com/webhooks/terraform"
    method: "POST"  # POST or PUT (default: POST)
    retry:
      max_attempts: 3        # Number of retry attempts (default: 3)
      initial_delay_ms: 1000 # Initial delay in milliseconds (default: 1000)
      max_delay_ms: 30000    # Maximum delay in milliseconds (default: 30000)
      retry_on_status:       # HTTP status codes that trigger a retry
        - 500                # (default: [500, 502, 503, 504])
        - 502
        - 503
        - 504

  # Slack target - sends formatted messages to a Slack channel
  slack:
    webhook_url: "https://hooks.slack.com/services/YOUR/WEBHOOK/URL"
    channel: "#infrastructure"  # Optional: override default channel
    username: "Infralog"        # Optional: override bot username
    icon_emoji: ":terraform:"   # Optional: override bot icon

# Resource and output filtering
filter:
  # Optional: List of resource types to monitor.
  # Omit to monitor all resources, or use [] to monitor none.
  resource_types:
    - "aws_instance"
    - "aws_s3_bucket"
    - "aws_rds_cluster"
    - "aws_lambda_function"

  # Optional: List of outputs to monitor.
  # Omit to monitor all outputs, or use [] to monitor none.
  outputs:
    - "instance_ip"
    - "database_endpoint"
